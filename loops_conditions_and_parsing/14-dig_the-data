#!/usr/bin/env bash
# 14-dig_the-data

LOG_FILE="${1:-access.log}"

# Exit quietly if file doesn't exist or is empty
[[ ! -s "$LOG_FILE" ]] && exit 0

# Parse IP ($1) and HTTP code ($9), count occurrences, print formatted, sort descending
awk '{if (NF>=9 && $9 ~ /^[0-9]+$/) count[$1" "$9]++} 
     END {for (k in count) printf "%d %s\n", count[k], k}' "$LOG_FILE" | sort -nr -k1,1

