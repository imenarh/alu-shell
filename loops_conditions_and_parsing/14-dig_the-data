#!/usr/bin/env bash
# 14-dig_the-data
# Groups visitors by IP and HTTP status, ordered by occurrence
# Must use awk only, no loops in Bash

LOG_FILE="${1:-access.log}"

# Exit quietly if file doesn't exist or is empty
[[ ! -s "$LOG_FILE" ]] && exit 0

# Extract IP ($1) and HTTP code ($9), count occurrences, then sort numerically descending
awk '{if (NF>=9 && $9 ~ /^[0-9]+$/) count[$1" "$9]++} 
     END {for (k in count) print count[k], k}' "$LOG_FILE" | sort -nr -k1,1

